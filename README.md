# iOS下Telegram不再转圈的解决方案

经大佬 P佬 的仔细研究，Telegram当前转圈的可能原因为账户所对应的服务器地址超负载，此时表现为与该服务器交换数据存在问题。

Telegram本身是不支持用户自由选择服务器地址的，只能由系统分配，其再分配过程触发困难，但所有服务器均可以正常响应正常用户的数据请求。所以解决思路为：

1.观察存在转圈情况时（表现为长时间加载中但没有新消息刷新），打开代理软件检查连接情况，捕捉此时连接的IP，以下定义为劣化 IP。

2.对于这类劣化 IP 存在两种方案：

（1）服务器端重定向：直接在服务器使用路由表路由到确定正常加载内容的服务器IP，此类解决方案适合自建节点和机场侧优化。

（2）代理软件端重定向：可以使用Surge的类 Host 功能，配置（DC5示例，请根据具体情况配置），我们希望大家补充其他代理软件的解决方案：


    [General]
    use-local-host-item-for-proxy = true
    
    [Host]
    91.108.56.100 = 91.108.56.147
    91.108.56.101 = 91.108.56.147
    91.108.56.104 = 91.108.56.147
    91.108.56.107 = 91.108.56.147
    91.108.56.125 = 91.108.56.147
    91.108.56.126 = 91.108.56.147
    91.108.56.128 = 91.108.56.147
    91.108.56.156 = 91.108.56.147

即可解决大部分 DC5 用户加载缓慢情况，具体重定向 IP 需要进行测试后选择，需要重定向的 IP 范围需要根据个人情况配置。

特别注意： 各 DC 用户不要使用其他 DC 适用的 IP，举例 IP 仅用于 DC5。

特别感谢：P佬、Surge 开发者刘老师、代理软件群组Surge Pro各位高级用户的研究。
